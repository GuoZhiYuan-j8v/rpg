{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/Player/script/Player.ts"],"names":["_decorator","Collider2D","Component","Contact2DType","Animation","find","input","Input","RigidBody2D","v2","EPhysics2DDrawFlags","PhysicsSystem2D","sys","interaction","ccclass","property","Anistate","walk","walkUp","idle","sitDown","walkDown","sitUp","idleDown","idleUp","peopleIndesk","group","default","Player","right","left","anima","contact","interactionName","canMove","up","down","finallyDir","lockInPlayAnimation","unlockInPlayAnimation","start","drawPhysics","instance","debugDrawFlags","Aabb","Pair","CenterOfMass","Joint","Shape","colliderPlayer","node","getComponent","console","log","on","BEGIN_CONTACT","onBeginContactPlayer","END_CONTACT","onEndContactPlayer","enabled","onLoad","localStorage","setItem","getPathInHierarchy","Ani","defaultClip","name","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","onDestroy","off","setAni","event","keyCode","parseInt","getItem","children","active","getComponents","forEach","element","interactionContactFunction","equipName","setParent","setWorldPosition","worldPosition","update","deltaTime","setPosition","move","selfCollider","otherCollider","canInteraction","setScale","rBody","linearVelocity","moveSpeed","y","x","动画重复检测","play"],"mappings":"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","sourcesContent":["import { _decorator, Collider2D, Component, Contact2DType, director, Animation, EventKeyboard, find, input, Input, IPhysics2DContact, KeyCode, Node, RigidBody2D, Sprite, v2, BaseNode, EPhysics2DDrawFlags, PhysicsSystem2D, Label, Prefab, instantiate, screen, ProgressBar, Vec2, sys } from 'cc';\nimport { interaction } from 'db://assets/tools/interaction/interaction';\nimport { stateUI } from '../../tools/状态栏/stateUI';\nconst { ccclass, property } = _decorator;\nexport let Anistate = {\n    walk: 'walk',\n    walkUp: 'walkUp',\n    idle: 'idle',\n    sitDown: 'sitDown',\n    walkDown: 'walkDown',\n    sitUp: 'sitUp',\n    idleDown: 'idleDown',\n    idleUp: 'idleUp',\n    peopleIndesk: 'peopleIndesk',\n}\n\nexport const group = {\n    default: 1,\n    Player: 2,\n    interaction: 4,\n}\n@ccclass('Player')\nexport class Player extends Component {\n    @property\n    drawPhysics: boolean = false\n    @property(Animation)\n    Ani: Animation = null!\n    @property(RigidBody2D)\n    rBody: RigidBody2D = null!\n    @property\n    moveSpeed: number = 8\n    right: boolean = false\n    left: boolean = false\n    anima: string;\n    contact: boolean;\n    interactionName: Node;\n    canMove: boolean = true\n    up: boolean = false\n    down: boolean = false\n    finallyDir: Vec2 = v2(0, 0);\n    lockInPlayAnimation() {\n        this.canMove = false\n    }\n    unlockInPlayAnimation() {\n        this.canMove = true\n    }\n    start() {\n\n        //screen.requestFullScreen()\n        /*this.inventory=instantiate(this.bag)\n        this.inventory.setParent(find('Canvas/Camera'))\n        this.inventory.setPosition(0,300)*/\n        if (this.drawPhysics == true) {\n            PhysicsSystem2D.instance.debugDrawFlags = EPhysics2DDrawFlags.Aabb |\n                EPhysics2DDrawFlags.Pair |\n                EPhysics2DDrawFlags.CenterOfMass |\n                EPhysics2DDrawFlags.Joint |\n                EPhysics2DDrawFlags.Shape;\n        }\n        let colliderPlayer = this.node.getComponent(Collider2D);\n        if (colliderPlayer) {\n            console.log('67890')\n            colliderPlayer.on(Contact2DType.BEGIN_CONTACT, this.onBeginContactPlayer, this);\n            colliderPlayer.on(Contact2DType.END_CONTACT, this.onEndContactPlayer, this)\n        }\n        colliderPlayer.enabled = true\n        console.log(colliderPlayer.group)\n    }\n    onLoad() {\n        sys.localStorage.setItem('PlayerPath',this.node.getPathInHierarchy())\n\n\n        this.anima = this.Ani.defaultClip.name\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n    }\n    onDestroy() {\n\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n    }\n    idle() {\n        this.setAni(Anistate.idle, true)\n    }\n    onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case parseInt(sys.localStorage.getItem('left')):\n                this.left = true\n                console.log(this.left)\n                break;\n            case parseInt(sys.localStorage.getItem('right')):\n                this.right = true\n\n                break;\n            case parseInt(sys.localStorage.getItem('up')):\n                this.up = true\n\n                break;\n            case parseInt(sys.localStorage.getItem('down')):\n                this.down = true\n\n                break\n            case parseInt(sys.localStorage.getItem('interaction')):\n                console.log(this.anima)\n                if (this.node.children[0].active == true) {\n                    this.interactionName.getComponents(interaction).forEach(element => {\n                        element.interactionContactFunction()\n                    });\n                    //this.interactionName.getComponent(interaction).interactionContactFunction()\n                    this.node.children[0].active = false\n                } else if (this.anima == Anistate.peopleIndesk) {\n                    this.idle()\n                } else if (this.node.children[1]) {\n                    let equipName = this.node.children[1].name\n                    this.node.children[1].setParent(find('Canvas/2.5d'))\n                    find('Canvas/2.5d/' + equipName).setWorldPosition(this.node.worldPosition)\n                }\n                break\n            /*case parseInt(sys.localStorage.getItem('esc')):\n                director.loadScene('setting')\n                break*/\n            /*case parseInt(sys.localStorage.getItem('save')):\n                sys.localStorage.setItem('SaveScene',director.getScene().name)\n                /*let saveLabel=instantiate()\n                saveLabel.addComponent(Label).string='保存'+director.getScene().name\n                saveLabel.setParent(find('Canvas'))\n                break\n                */\n        }\n    }\n    onKeyUp(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case parseInt(sys.localStorage.getItem('left')):\n                if (this.left == true) {\n\n                    this.left = false\n                    this.finallyDir = v2(-1, 0)\n                }\n                console.log(this.left)\n                break;\n            case parseInt(sys.localStorage.getItem('right')):\n                if (this.right == true) {\n                    this.right = false\n                    this.finallyDir = v2(1, 0)\n                }\n\n                break;\n            case parseInt(sys.localStorage.getItem('up')):\n                if (this.up == true) {\n                    this.up = false\n                    this.finallyDir = v2(0, 1)\n                }\n\n                break\n            case parseInt(sys.localStorage.getItem('down')):\n                if (this.down == true) {\n                    this.down = false\n                    this.finallyDir = v2(0, -1)\n                }\n                break\n        }\n    }\n    update(deltaTime: number) {\n        if (this.node.children[0]) {\n            this.node.children[0].setPosition(0, 169, 0)\n        }\n        //console.log(this.lnventory)\n        this.move(deltaTime)\n    }\n    onBeginContactPlayer(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        //console.log(otherCollider.group)\n        console.log(otherCollider.group)\n        if (otherCollider.group == 4) {\n            this.contact = true\n            if (otherCollider.node.getComponent(interaction).canInteraction == true) {\n                this.interactionName = otherCollider.node\n\n                console.log(this.interactionName.name + 'onBeginContact')\n                this.node.children[0].active = true\n            }\n\n        }\n    }\n    onEndContactPlayer(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        if (otherCollider.group == 4) {\n            this.contact = false\n            this.node.children[0].active = false\n        }\n        console.log(666)\n    }\n    move(deltaTime: number) {\n        if (this.canMove == true) {\n\n            //console.log(this.anima)\n            if (this.anima == Anistate.idle || this.anima == Anistate.walk || this.anima == Anistate.walkUp || this.anima == Anistate.walkDown || this.anima == Anistate.idleDown || this.anima == Anistate.idleUp) {\n                if (this.left == true || this.right == true) {\n                    this.setAni(Anistate.walk, true)\n\n                } else if (this.up == true || this.down == true) {\n                    if (this.down == true) {\n                        this.setAni(Anistate.walkDown, true)\n                    } else if (this.up == true) {\n                        this.setAni(Anistate.walkUp, true)\n                    }\n                }\n                if (this.left == true) {\n                    this.node.setScale(-1, 1, 1)\n                } else if (this.right == true) {\n                    this.node.setScale(1, 1, 1)\n                }\n                if (this.left == true && this.right == false) {\n                    this.rBody.linearVelocity = v2(-1 * this.moveSpeed, this.rBody.linearVelocity.y)\n                } else if (this.left == false && this.right == true) {\n                    this.rBody.linearVelocity = v2(1 * this.moveSpeed, this.rBody.linearVelocity.y)\n                } else {\n                    if (this.up == false && this.down == false) {\n                        if (this.finallyDir.y == 1) {\n                            this.setAni(Anistate.idleUp, true)\n                        } else if (this.finallyDir.y == -1) {\n                            this.setAni(Anistate.idleDown, true)\n                        }\n                    }\n\n                    this.rBody.linearVelocity = v2(0, this.rBody.linearVelocity.y)\n                }\n                if (this.up == true && this.down == false) {\n                    this.rBody.linearVelocity = v2(this.rBody.linearVelocity.x, 1 * this.moveSpeed)\n                } else if (this.up == false && this.down == true) {\n                    this.rBody.linearVelocity = v2(this.rBody.linearVelocity.x, -1 * this.moveSpeed)\n                } else {\n                    if (this.left == false && this.right == false) {\n                        if (this.finallyDir.x == 1 || this.finallyDir.x == -1) {\n                            this.setAni(Anistate.idle, true)\n                        }\n                    }\n                    this.rBody.linearVelocity = v2(this.rBody.linearVelocity.x, 0)\n                }\n            } else {\n\n            }\n        }\n\n    }\n    setAni(anima: string, 动画重复检测: boolean, node?: Animation) {\n        if (动画重复检测 == true) {\n            if (this.anima == anima) return\n        }\n        this.anima = anima\n        if (node) {\n            node.play(anima)\n        } else { this.Ani.play(anima) }\n    }\n}\n\n"]}