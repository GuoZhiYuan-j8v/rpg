{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/tools/dialog/typeScript/dialog_galgame_haiguitang.ts"],"names":["_decorator","Component","TextAsset","Label","Button","Prefab","Layout","instantiate","EventHandler","sys","find","director","Input","input","Sprite","SpriteFrame","dialogLocalData","ccclass","property","action","dialog_galgame","tooltip","displayName","type","dialogindex","dialogRows","cell","index","jumptext","canPress","anima","canRestart","isChoose","start","getSysLocalAboutDialog","readText","csv","showDialogRow","onLoad","on","EventType","KEY_DOWN","onKeyDown","localStorage","removeItem","event","keyCode","parseInt","getItem","console","log","node","active","onClickNext","unscheduleAllCallbacks","text","string","onDestroy","off","update","deltaTime","showTextAnim","setItem","i","length","scheduleOnce","setAni","动画重复检测","play","updateText","_name","_text","eventHandler","emit","Name","renwu_spriteFrame","renwu_sprite","spriteFrame","NoPictureNoDisplay","bgSpriteFrame","bg_sprite","_TextAsset","split","DialogueFunc","endFunc","GenerateOption","onOptionClick","id","getComponentsInChildren","destroyAllChildren","DialogueChooseFunc","cell5","name","setSysLocalAboutDIalog","add","loadScene","getSysLocalAboutDialogDOM","delete","endDelete","Restart","destroy","_index","button","optionButton","setParent","cell1","dd","condition","ooc","CLICK","getComponentInChildren","condition2","replace","celll","getComponent","interactable"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;AAAmBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,G,OAAAA,G;AAA8BC,MAAAA,I,OAAAA,I;AAAgDC,MAAAA,Q,OAAAA,Q;AAAkCC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AACnPC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBlB,U;;wBAClBmB,M,0BAAAA,M;AAAAA,QAAAA,M,CAAAA,M;AAAAA,QAAAA,M,CAAAA,M;eAAAA,M;;;gCAKCC,c,WADZH,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAAC,CAACV,YAAD,CAAD,C,UAERU,QAAQ,CAAC;AAACG,QAAAA,OAAO,EAAC;AAAT,OAAD,C,UAERH,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,QAAd;AAAwBD,QAAAA,OAAO,EAAE,kDAAjC;AAAqFE,QAAAA,IAAI,EAAER;AAA3F,OAAD,C,UAERG,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,QAAd;AAAwBD,QAAAA,OAAO,EAAE,kDAAjC;AAAqFE,QAAAA,IAAI,EAAER;AAA3F,OAAD,C,UAERG,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,UAAd;AAA0BD,QAAAA,OAAO,EAAE,QAAnC;AAA6CE,QAAAA,IAAI,EAAET;AAAnD,OAAD,C,UAERI,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,YAAd;AAA4BD,QAAAA,OAAO,EAAE,QAArC;AAA+CE,QAAAA,IAAI,EAAET;AAArD,OAAD,C,UAERI,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,WAAd;AAA2BD,QAAAA,OAAO,EAAE,MAApC;AAA4CE,QAAAA,IAAI,EAAErB;AAAlD,OAAD,C,UAERgB,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,IAAd;AAAoBD,QAAAA,OAAO,EAAE,YAA7B;AAA2CE,QAAAA,IAAI,EAAEpB;AAAjD,OAAD,C,WAERe,QAAQ,CAAC;AAACI,QAAAA,WAAW,EAAE,IAAd;AAAoBD,QAAAA,OAAO,EAAE,UAA7B;AAAyCE,QAAAA,IAAI,EAAEpB;AAA/C,OAAD,C,WAERe,QAAQ,CAACb,MAAD,C,WAERa,QAAQ,CAACZ,MAAD,C,2BAtBb,MACac,cADb,SACoCnB,SADpC,CAC6C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAuBzC;AAvByC,eAwBzCuB,WAxByC,GAwBtB,CAxBsB;AAAA,eAyBzCC,UAzByC;AAAA,eA0BzCC,IA1ByC;AAAA,eA2BzCC,KA3ByC;AAAA,eA4BzCC,QA5ByC,GA4BxB,IA5BwB;AAAA,eA6BzCC,QA7ByC,GA6BvB,IA7BuB;AAAA,eA8BzCC,KA9ByC;;AAAA;;AAAA,eAiCzCC,UAjCyC;AAAA,eAkCzCC,QAlCyC,GAkCvB,KAlCuB;AAAA;;AAmCzCC,QAAAA,KAAK,GAAG;AACJ;AAAA;AAAA,kDAAgBC,sBAAhB;AACA,eAAKC,QAAL,CAAc,KAAKC,GAAnB;AACA,eAAKC,aAAL;AACH;;AACDC,QAAAA,MAAM,GAAE;AACJzB,UAAAA,KAAK,CAAC0B,EAAN,CAAS3B,KAAK,CAAC4B,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACAjC,UAAAA,GAAG,CAACkC,YAAJ,CAAiBC,UAAjB,CAA4B,UAA5B;AACH;;AACDF,QAAAA,SAAS,CAAEG,KAAF,EAAwB;AAC7B,kBAAOA,KAAK,CAACC,OAAb;AACI,iBAAKC,QAAQ,CAACtC,GAAG,CAACkC,YAAJ,CAAiBK,OAAjB,CAAyB,MAAzB,CAAD,CAAb;AACIC,cAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;AACA,kBAAG,KAAKlB,QAAL,IAAe,KAAlB,EAAwB;AACJ,oBAAG,KAAKH,QAAL,IAAe,IAAf,IAAqB,KAAKsB,IAAL,CAAUC,MAAV,IAAkB,IAA1C,EAA+C;AAC/D,uBAAKC,WAAL;AACA;AACpB;AACA;AACiB,iBALmB,MAKd,IAAG,KAAKxB,QAAL,IAAe,KAAlB,EAAwB;AAC1B,uBAAKyB,sBAAL;AACA,uBAAKC,IAAL,CAAUC,MAAV,GAAiB/C,GAAG,CAACkC,YAAJ,CAAiBK,OAAjB,CAAyB,MAAzB,CAAjB;AACA,uBAAKnB,QAAL,GAAc,IAAd;AACH;AACA;;AAED;AAhBR;AAkBH;;AACS4B,QAAAA,SAAS,GAAS;AACxB5C,UAAAA,KAAK,CAAC6C,GAAN,CAAU9C,KAAK,CAAC4B,SAAN,CAAgBC,QAA1B,EAAoC,KAAKC,SAAzC,EAAoD,IAApD;AACH;;AACDiB,QAAAA,MAAM,CAACC,SAAD,EAAoB,CACzB;;AACDC,QAAAA,YAAY,CAACN,IAAD,EAAa;AACrB9C,UAAAA,GAAG,CAACkC,YAAJ,CAAiBmB,OAAjB,CAAyB,MAAzB,EAAgCP,IAAhC;;AACA,eAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAAI,CAACS,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,iBAAKE,YAAL,CAAkB,MAAM;AACpB,mBAAKV,IAAL,CAAUC,MAAV,IAAkBD,IAAI,CAACQ,CAAD,CAAtB;;AACA,kBAAG,KAAKR,IAAL,CAAUC,MAAV,IAAkBD,IAArB,EAA0B;AACtB,qBAAK1B,QAAL,GAAc,IAAd;AACAoB,gBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH;AACJ,aAND,EAMG,MAAMa,CANT;AAOF;AAEL;;AACDG,QAAAA,MAAM,CAACpC,KAAD,EAAcqB,IAAd,EAA6BgB,MAA7B,EAA4C;AAC9C,cAAGA,MAAM,IAAE,IAAX,EAAgB;AACZ,gBAAG,KAAKrC,KAAL,IAAYA,KAAf,EAAqB;AAAC;AAAO;AAChC;;AACD,eAAKA,KAAL,GAAWA,KAAX;AACAqB,UAAAA,IAAI,CAACiB,IAAL,CAAUtC,KAAV;AACH;;AACDuC,QAAAA,UAAU,CAACC,KAAD,EAAcC,KAAd,EAA2B;AACjC,cAAG,KAAKC,YAAL,CAAkB,KAAKhD,WAAvB,CAAH,EAAuC;AACnC,iBAAKgD,YAAL,CAAkB,KAAKhD,WAAvB,EAAoCiD,IAApC,CAAyC,EAAzC;AACH;;AACD,eAAKC,IAAL,CAAUlB,MAAV,GAAmBc,KAAnB;AACA,eAAKzC,QAAL,GAAc,KAAd;AACA,eAAK0B,IAAL,CAAUC,MAAV,GAAmB,EAAnB;;AACA,cAAI,KAAKmB,iBAAL,CAAuB,KAAKnD,WAA5B,KAA4C,IAAhD,EAAsD;AAClD,iBAAKoD,YAAL,CAAkBC,WAAlB,GAAgC,KAAKF,iBAAL,CAAuB,KAAKnD,WAA5B,CAAhC;AACH,WAFD,MAEM,IAAG,KAAKsD,kBAAL,IAAyB,IAA5B,EAAiC;AACnC,iBAAKF,YAAL,CAAkBC,WAAlB,GAA8B,IAA9B;AACH;;AACD,cAAI,KAAKE,aAAL,CAAmB,KAAKvD,WAAxB,KAAwC,IAA5C,EAAkD;AAC9C,iBAAKwD,SAAL,CAAeH,WAAf,GAA6B,KAAKE,aAAL,CAAmB,KAAKvD,WAAxB,CAA7B;AACH,WAdgC,CAejC;;;AACA,eAAKqC,YAAL,CAAkBU,KAAlB;AACH;;AACDpC,QAAAA,QAAQ,CAAC8C,UAAD,EAAsB;AAC1B,eAAKxD,UAAL,GAAgBwD,UAAU,CAAC1B,IAAX,CAAgB2B,KAAhB,CAAsB,IAAtB,CAAhB;AACH;;AACD7C,QAAAA,aAAa,GAAE;AAEX,eAAK,IAAIV,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKF,UAAL,CAAgBuC,MAA5C,EAAoDrC,KAAK,EAAzD,EAA6D;AACzD,iBAAKD,IAAL,GAAU,KAAKD,UAAL,CAAgBE,KAAhB,EAAuBuD,KAAvB,CAA6B,GAA7B,CAAV;;AACA,gBAAG,KAAKxD,IAAL,CAAU,CAAV,KAAc,GAAd,IAAmBqB,QAAQ,CAAC,KAAKrB,IAAL,CAAU,CAAV,CAAD,CAAR,IAAwB,KAAKF,WAAnD,EAA+D;AAC3D,mBAAKK,QAAL,GAAc,IAAd;AACA,mBAAKwC,UAAL,CAAgB,KAAK3C,IAAL,CAAU,CAAV,CAAhB,EAA6B,KAAKA,IAAL,CAAU,CAAV,CAA7B;AACA,mBAAKF,WAAL,GAAiBuB,QAAQ,CAAC,KAAKrB,IAAL,CAAU,CAAV,CAAD,CAAzB;AACA,mBAAKyD,YAAL,CAAkB,KAAKzD,IAAL,CAAU,CAAV,CAAlB;AACAuB,cAAAA,OAAO,CAACC,GAAR,CAAY,KAAKxB,IAAL,CAAU,CAAV,CAAZ;;AAEA,kBAAG,KAAKA,IAAL,CAAU,CAAV,KAAc,EAAjB,EAAoB;AAChB,oBAAG,KAAK8C,YAAL,CAAkB,KAAKhD,WAAvB,CAAH,EAAuC;AACnC,uBAAKgD,YAAL,CAAkB,KAAKhD,WAAvB,EAAoCiD,IAApC,CAAyC,EAAzC;AACH;;AACDxB,gBAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,qBAAKkC,OAAL;AACH;;AACD;AACH,aAfD,MAeM,IAAG,KAAK1D,IAAL,CAAU,CAAV,KAAc,GAAd,IAAmBqB,QAAQ,CAAC,KAAKrB,IAAL,CAAU,CAAV,CAAD,CAAR,IAAwB,KAAKF,WAAnD,EAA+D;AACjE,mBAAKK,QAAL,GAAc,KAAd;AACA,mBAAKwD,cAAL,CAAoB1D,KAApB;AACH;AACJ;AACJ;;AACD2D,QAAAA,aAAa,CAACC,EAAD,EAAW;AAEpB,eAAK/D,WAAL,GAAiB+D,EAAjB;AACA,eAAKlD,aAAL;;AACA,eAAK,IAAIV,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKrB,MAAL,CAAYkF,uBAAZ,CAAoCpF,MAApC,EAA4C4D,MAAxE,EAAiFrC,KAAK,EAAtF,EAAyF;AACrF,iBAAKrB,MAAL,CAAY6C,IAAZ,CAAiBsC,kBAAjB;AACH;AACJ,SA9IwC,CA+IzC;;;AACAC,QAAAA,kBAAkB,CAACC,KAAD,EAAO;AACrB,cAAIjE,IAAI,GAACqB,QAAQ,CAAC4C,KAAD,CAAjB;AACA1C,UAAAA,OAAO,CAACC,GAAR,CAAYxB,IAAZ,EAFqB,CAGrB;AACA;;AACA,kBAAOA,IAAP;AACI,iBAAK,CAAL;AACI,sBAAO,KAAKyB,IAAL,CAAUyC,IAAjB;AACI,qBAAK,WAAL;AACI;AAAA;AAAA,0DAAgBC,sBAAhB,CAAuC,WAAvC,EAAmD1E,MAAM,CAAC2E,GAA1D;AACA7C,kBAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA;AAJR;;AAQA;AAVR;AAaH;;AACDkC,QAAAA,OAAO,GAAE;AACLnC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,IAAL,CAAUyC,IAAtB;;AACA,kBAAO,KAAKzC,IAAL,CAAUyC,IAAjB;AACI,iBAAK,SAAL;AACIlF,cAAAA,IAAI,CAAC,0BAAD,CAAJ,CAAiC0C,MAAjC,GAAwC,IAAxC;AACA;;AACJ,iBAAK,QAAL;AACI1C,cAAAA,IAAI,CAAC,0BAAD,CAAJ,CAAiC0C,MAAjC,GAAwC,IAAxC;AACA;;AACJ,iBAAK,QAAL;AACI1C,cAAAA,IAAI,CAAC,mBAAD,CAAJ,CAA0B0C,MAA1B,GAAiC,IAAjC;AACA;;AACJ,iBAAK,QAAL;AACIzC,cAAAA,QAAQ,CAACoF,SAAT,CAAmB,YAAnB;AACA;;AACJ,iBAAK,QAAL;AACIpF,cAAAA,QAAQ,CAACoF,SAAT,CAAmB,gBAAnB;AACA;;AACJ,iBAAK,SAAL;AACI;AACA;;AACJ,iBAAK,YAAL;AACI;;AACJ,iBAAK,eAAL;AACIrF,cAAAA,IAAI,CAAC,cAAD,CAAJ,CAAqB0C,MAArB,GAA4B,IAA5B;AACA;;AACJ,iBAAK,MAAL;AACI1C,cAAAA,IAAI,CAAC,mBAAD,CAAJ,CAA0B0C,MAA1B,GAAiC,IAAjC;AACA;;AACJ,iBAAK,OAAL;AACIH,cAAAA,OAAO,CAACC,GAAR,CAAY;AAAA;AAAA,sDAAgBhB,sBAAhB,EAAZ;;AACA,kBAAG;AAAA;AAAA,sDAAgB8D,yBAAhB,CAA0C,MAA1C,CAAH,EAAqD;AACjD/C,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAxC,gBAAAA,IAAI,CAAC,uBAAD,CAAJ,CAA8B0C,MAA9B,GAAqC,IAArC;AACA;AAAA;AAAA,wDAAgByC,sBAAhB,CAAuC,MAAvC,EAA8C1E,MAAM,CAAC8E,MAArD;AACH,eAJD,MAIK;AACDvF,gBAAAA,IAAI,CAAC,eAAD,CAAJ,CAAsB0C,MAAtB,GAA6B,IAA7B;AACAH,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH;;AAED;;AACJ,iBAAK,OAAL;AACI,kBAAG;AAAA;AAAA,sDAAgB8C,yBAAhB,CAA0C,MAA1C,CAAH,EAAqD;AACjD/C,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAxC,gBAAAA,IAAI,CAAC,uBAAD,CAAJ,CAA8B0C,MAA9B,GAAqC,IAArC;AACA1C,gBAAAA,IAAI,CAAC,qBAAD,CAAJ,CAA4B0C,MAA5B,GAAmC,KAAnC;AACH,eAJD,MAIK;AACD1C,gBAAAA,IAAI,CAAC,qBAAD,CAAJ,CAA4B0C,MAA5B,GAAmC,IAAnC;AACH;;AACD;AAAA;AAAA,sDAAgByC,sBAAhB,CAAuC,MAAvC,EAA8C1E,MAAM,CAAC8E,MAArD;AACA;AAAA;AAAA,sDAAgBJ,sBAAhB,CAAuC,MAAvC,EAA8C1E,MAAM,CAAC8E,MAArD;AACA;;AACJ,iBAAK,OAAL;AACItF,cAAAA,QAAQ,CAACoF,SAAT,CAAmB,KAAnB;AACA;;AACJ,iBAAK,SAAL;AACIpF,cAAAA,QAAQ,CAACoF,SAAT,CAAmB,8BAAnB;AACA;;AACJ,iBAAK,WAAL;AACI9C,cAAAA,OAAO,CAACC,GAAR,CAAY;AAAA;AAAA,sDAAgBhB,sBAAhB,EAAZ;;AACI,kBAAG;AAAA;AAAA,sDAAgB8D,yBAAhB,CAA0C,QAA1C,CAAH,EAAuD;AACnD,oBAAG;AAAA;AAAA,wDAAgBA,yBAAhB,CAA0C,KAA1C,CAAH,EAAoD,CACnD,CADD,MACK;AACD,sBAAG;AAAA;AAAA,0DAAgBA,yBAAhB,CAA0C,WAA1C,CAAH,EAA0D;AAC1DtF,oBAAAA,IAAI,CAAC,sBAAD,CAAJ,CAA6B0C,MAA7B,GAAoC,IAApC;AACH,mBAFG,MAEC;AACD1C,oBAAAA,IAAI,CAAC,aAAD,CAAJ,CAAoB0C,MAApB,GAA2B,IAA3B;AACH;AACA;AAGR,eAXG,MAWE,IAAG;AAAA;AAAA,sDAAgB4C,yBAAhB,CAA0C,UAA1C,CAAH,EAAyD,CAE9D;;AACD;AAAA;AAAA,sDAAgBH,sBAAhB,CAAuC,KAAvC,EAA6C1E,MAAM,CAAC8E,MAApD;AACA;AAAA;AAAA,sDAAgBJ,sBAAhB,CAAuC,WAAvC,EAAmD1E,MAAM,CAAC8E,MAA1D;AACA;AAAA;AAAA,sDAAgBJ,sBAAhB,CAAuC,QAAvC,EAAgD1E,MAAM,CAAC8E,MAAvD;AACA;AAAA;AAAA,sDAAgBJ,sBAAhB,CAAuC,UAAvC,EAAkD1E,MAAM,CAAC8E,MAAzD;AACAhD,cAAAA,OAAO,CAACC,GAAR,CAAY;AAAA;AAAA,sDAAgBhB,sBAAhB,EAAZ,EAAqD;AAAA;AAAA,sDAAgB8D,yBAAhB,CAA0C,QAA1C,CAArD;AACA;AA7ER;;AA+EA,cAAG,KAAKE,SAAL,IAAgB,IAAnB,EAAwB;AACpBjD,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,iBAAKC,IAAL,CAAUC,MAAV,GAAiB,KAAjB;AACH;;AACD,eAAKrB,UAAL,GAAgB,IAAhB;AAEH;;AACDoE,QAAAA,OAAO,GAAE;AACL,eAAKhE,QAAL,CAAc,KAAKC,GAAnB;AACA,eAAKZ,WAAL,GAAiB,CAAjB;AACA,eAAKE,IAAL,GAAU,KAAKD,UAAL,CAAgB,CAAhB,EAAmByD,KAAnB,CAAyB,GAAzB,CAAV;;AACA,cAAG,KAAKnD,UAAL,IAAiB,IAApB,EAAyB;AACrB,iBAAKM,aAAL;AACA,iBAAKN,UAAL,GAAgB,KAAhB;AACH;AAEJ;;AACDoD,QAAAA,YAAY,CAACQ,KAAD,EAAO;AACf,cAAIjE,IAAI,GAACqB,QAAQ,CAAC4C,KAAD,CAAjB;AACA1C,UAAAA,OAAO,CAACC,GAAR,CAAYxB,IAAZ,EAFe,CAGf;AACC;;AACD,kBAAOA,IAAP;AACI,iBAAK,CAAL;AACI,sBAAO,KAAKU,GAAL,CAASwD,IAAhB;AACI,qBAAK,SAAL;AACIlF,kBAAAA,IAAI,CAAC,qBAAD,CAAJ,CAA4B0F,OAA5B,GADJ,CAEI;;AACA;AAAA;AAAA,0DAAgBP,sBAAhB,CAAuC,SAAvC,EAAiD1E,MAAM,CAAC2E,GAAxD;AACA;;AACJ,qBAAK,OAAL;AACI;AAAA;AAAA,0DAAgBD,sBAAhB,CAAuC,MAAvC,EAA8C1E,MAAM,CAAC2E,GAArD;AACA;;AACJ,qBAAK,OAAL;AACI;AAAA;AAAA,0DAAgBD,sBAAhB,CAAuC,MAAvC,EAA8C1E,MAAM,CAAC2E,GAArD;AACA;AAXR;;AAcA7C,cAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA;;AACJ,iBAAK,CAAL;AACI,sBAAO,KAAKC,IAAL,CAAUyC,IAAjB;AACI,qBAAK,WAAL;AACI;AAAA;AAAA,0DAAgBC,sBAAhB,CAAuC,QAAvC,EAAgD1E,MAAM,CAAC2E,GAAvD;AACA7C,kBAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA;;AACJ,qBAAK,OAAL;AACI;AAAA;AAAA,0DAAgB2C,sBAAhB,CAAuC,MAAvC,EAA8C1E,MAAM,CAAC2E,GAArD;AACA;AAPR;;AAUA7C,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA;;AACJ,iBAAK,CAAL;AACI,sBAAO,KAAKC,IAAL,CAAUyC,IAAjB;AACI,qBAAK,WAAL;AACI;AAAA;AAAA,0DAAgBC,sBAAhB,CAAuC,UAAvC,EAAkD1E,MAAM,CAAC2E,GAAzD;AACA7C,kBAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACA;AAJR;;AAOAD,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA;;AACJ,iBAAK,CAAL;AACI,sBAAO,KAAKC,IAAL,CAAUyC,IAAjB;AACI,qBAAK,WAAL;AACI;AAAA;AAAA,0DAAgBC,sBAAhB,CAAuC,KAAvC,EAA6C1E,MAAM,CAAC2E,GAApD;AACAnF,kBAAAA,QAAQ,CAACoF,SAAT,CAAmB,2BAAnB;AACA;AAJR;;AAOA9C,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA;AAlDR;AAoDH;;AAEDmC,QAAAA,cAAc,CAACgB,MAAD,EAAiB;AAC3B,iBAAO,IAAP,EAAa;AACT,iBAAK3E,IAAL,GAAY,KAAKD,UAAL,CAAgB4E,MAAhB,EAAwBnB,KAAxB,CAA8B,GAA9B,CAAZ;;AACA,gBAAI,KAAKxD,IAAL,CAAU,CAAV,KAAgB,GAApB,EAAyB;AACrB,kBAAI4E,MAAM,GAAE/F,WAAW,CAAC,KAAKgG,YAAN,CAAvB;AACAD,cAAAA,MAAM,CAACE,SAAP,CAAiB,KAAKlG,MAAL,CAAY6C,IAA7B;AACA,kBAAIsD,KAAK,GAAC,KAAK/E,IAAL,CAAU,CAAV,CAAV;AACA,kBAAIgF,EAAE,GAAG,KAAKhF,IAAL,CAAU,CAAV,CAAT;AACA,kBAAIA,IAAI,GAAG,KAAKA,IAAL,CAAU,CAAV,CAAX;AACA,kBAAIiF,SAAS,GAAC,KAAKjF,IAAL,CAAU,CAAV,CAAd;AAEA,mBAAKM,QAAL,GAAc,IAAd;;AACA,kBAAI4E,GAAG,GAAG,MAAM;AACZ,qBAAK5E,QAAL,GAAc,KAAd;AACA,qBAAK0D,kBAAL,CAAwBhE,IAAxB;AACA,qBAAK4D,aAAL,CAAmBvC,QAAQ,CAAC2D,EAAD,CAA3B;;AACA,oBAAI,KAAKlC,YAAL,CAAkBiC,KAAlB,CAAJ,EAA6B;AACzB,uBAAKjC,YAAL,CAAkBiC,KAAlB,EAAyBhC,IAAzB,CAA8B,EAA9B;AACH;AACJ,eAPD;;AAQA6B,cAAAA,MAAM,CAAC/D,EAAP,CAAUnC,MAAM,CAACoC,SAAP,CAAiBqE,KAA3B,EAAkCD,GAAlC,EAAuC,IAAvC;AACAN,cAAAA,MAAM,CAACQ,sBAAP,CAA8B3G,KAA9B,EAAqCqD,MAArC,GAA8C,KAAK9B,IAAL,CAAU,CAAV,CAA9C,CAlBqB,CAmBrB;;AACAuB,cAAAA,OAAO,CAACC,GAAR,CAAY,OAAOyD,SAAnB;;AACA,kBAAGA,SAAH,EAAc;AACV,sBAAMI,UAAU,GAAGJ,SAAS,CAACK,OAAV,CAAkB,iBAAlB,EAAqC,EAArC,CAAnB;AACA,oBAAIC,KAAK,GAACF,UAAU,CAAC7B,KAAX,CAAiB,GAAjB,CAAV;AACAjC,gBAAAA,OAAO,CAACC,GAAR,CAAY+D,KAAZ,EAAkBF,UAAlB;AACA9D,gBAAAA,OAAO,CAACC,GAAR,CAAYzC,GAAG,CAACkC,YAAJ,CAAiBK,OAAjB,CAAyBiE,KAAK,CAAC,CAAD,CAA9B,CAAZ,EAA+CA,KAAK,CAAC,CAAD,CAApD;;AACA,oBAAGxG,GAAG,CAACkC,YAAJ,CAAiBK,OAAjB,CAAyBiE,KAAK,CAAC,CAAD,CAA9B,KAAoCA,KAAK,CAAC,CAAD,CAA5C,EAAgD;AAC5CX,kBAAAA,MAAM,CAACY,YAAP,CAAoB9G,MAApB,EAA4B+G,YAA5B,GAAyC,IAAzC;AACH,iBAFD,MAEK;AACDb,kBAAAA,MAAM,CAACY,YAAP,CAAoB9G,MAApB,EAA4B+G,YAA5B,GAAyC,KAAzC;AACH;AACJ;;AACDd,cAAAA,MAAM;AACT,aAjCD,MAiCO;AACH;AACH;AACJ;AACJ;;AACDhD,QAAAA,WAAW,GAAE;AACT;AACR;AACA;AACQ,eAAKhB,aAAL;AACH;;AA9WwC,O;;;;;iBAEb,E;;;;;;;iBAED,K;;;;;;;iBAEK,E;;;;;;;iBAEJ,E;;;;;;;iBAEX,I;;;;;;;iBAEG,I;;;;;;;iBAEN,I;;;;;;;iBAEH,I;;;;;;;iBAEA,I;;;;;;;iBAES,I;;;;;;;iBAEN,I;;qFASbnB,Q;;;;;iBACiB,K","sourcesContent":["import { _decorator, Component, Node, TextAsset, Label, Button, Prefab, Layout, resources, instantiate, EventHandler, sys, SkelAnimDataHub, Camera, find, UITransform, tween, animation, Animation, director, EventKeyboard, KeyCode, Input, input, Sprite, SpriteFrame, BaseRenderData } from 'cc';\r\nimport { dialogLocalData } from '../../本地存储/dialogLocal';\r\nconst { ccclass, property } = _decorator;\r\nexport enum action{\r\n    add,\r\n    delete,\r\n}\r\n@ccclass('dialog_galgame')\r\nexport class dialog_galgame extends Component{\r\n    @property([EventHandler])\r\n    eventHandler:EventHandler[]=[]\r\n    @property({tooltip:'没有放人物立绘的位置不显示图片'})\r\n    NoPictureNoDisplay:boolean=false\r\n    @property({displayName: \"人物立绘资源\", tooltip: \"图片数组代表在dialogindex的位置，比如0就在dialogindex等于0的时候显示图片\", type: SpriteFrame})\r\n    renwu_spriteFrame:SpriteFrame[]=[]\r\n    @property({displayName: \"背景图片资源\", tooltip: \"图片数组代表在dialogindex的位置，比如0就在dialogindex等于0的时候显示图片\", type: SpriteFrame})\r\n    bgSpriteFrame:SpriteFrame[]=[]\r\n    @property({displayName: \"切换背景图片组件\", tooltip: \"切换图片节点\", type: Sprite})\r\n    bg_sprite:Sprite=null!\r\n    @property({displayName: \"切换人物立绘图片组件\", tooltip: \"切换图片节点\", type: Sprite})\r\n    renwu_sprite:Sprite=null!\r\n    @property({displayName: \"csv对话文本文件\", tooltip: \"对话内容\", type: TextAsset})\r\n    csv:TextAsset=null!\r\n    @property({displayName: \"对话\", tooltip: \"对话内容的label\", type: Label})\r\n    text:Label=null!\r\n    @property({displayName: \"名字\", tooltip: \"名字的label\", type: Label})\r\n    Name:Label=null!\r\n    @property(Prefab)\r\n    optionButton:Prefab=null!\r\n    @property(Layout)\r\n    Layout:Layout=null!\r\n    //跳转对话的id\r\n    dialogindex:number=0\r\n    dialogRows:string[]\r\n    cell: string[];\r\n    index: number;\r\n    jumptext: string=null;\r\n    canPress: boolean=true\r\n    anima: string;\r\n    @property\r\n    endDelete:boolean=false\r\n    canRestart: boolean;\r\n    isChoose: boolean=false\r\n    start() {\r\n        dialogLocalData.getSysLocalAboutDialog()\r\n        this.readText(this.csv)\r\n        this.showDialogRow()\r\n    }\r\n    onLoad(){\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this)\r\n        sys.localStorage.removeItem('JUMPTEXT')\r\n    }\r\n    onKeyDown (event: EventKeyboard) {\r\n        switch(event.keyCode) {\r\n            case parseInt(sys.localStorage.getItem('next')):\r\n                console.log('press')\r\n                if(this.isChoose==false){\r\n                                    if(this.canPress==true&&this.node.active==true){\r\n                    this.onClickNext()\r\n                    /*if(this.node.name=='序'){\r\n                        find('Canvas/Label').active=false\r\n                    }*/\r\n                }else if(this.canPress==false){\r\n                    this.unscheduleAllCallbacks()\r\n                    this.text.string=sys.localStorage.getItem('text')\r\n                    this.canPress=true\r\n                }\r\n                }\r\n\r\n                break;\r\n        }\r\n    }\r\n    protected onDestroy(): void {\r\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this)\r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n    showTextAnim(text:string){\r\n        sys.localStorage.setItem('text',text)\r\n        for (let i = 0; i < text.length; i++) {\r\n            this.scheduleOnce(() => {\r\n                this.text.string+=text[i]\r\n                if(this.text.string==text){\r\n                    this.canPress=true\r\n                    console.log('canpress')\r\n                }\r\n            }, 0.1 * i)\r\n         }\r\n         \r\n    }\r\n    setAni(anima:string,node:Animation,动画重复检测:boolean){\r\n        if(动画重复检测==true){\r\n            if(this.anima==anima){return}\r\n        }\r\n        this.anima=anima\r\n        node.play(anima)\r\n    }\r\n    updateText(_name:string,_text:string){\r\n        if(this.eventHandler[this.dialogindex]){\r\n            this.eventHandler[this.dialogindex].emit([])\r\n        }\r\n        this.Name.string = _name;\r\n        this.canPress=false\r\n        this.text.string = \"\";\r\n        if (this.renwu_spriteFrame[this.dialogindex] != null) {\r\n            this.renwu_sprite.spriteFrame = this.renwu_spriteFrame[this.dialogindex];\r\n        }else if(this.NoPictureNoDisplay==true){\r\n            this.renwu_sprite.spriteFrame=null\r\n        }\r\n        if (this.bgSpriteFrame[this.dialogindex] != null) {\r\n            this.bg_sprite.spriteFrame = this.bgSpriteFrame[this.dialogindex];\r\n        }\r\n        // 逐字显示文本\r\n        this.showTextAnim(_text)\r\n    }\r\n    readText(_TextAsset:TextAsset){\r\n        this.dialogRows=_TextAsset.text.split('\\n')\r\n    }\r\n    showDialogRow(){\r\n        \r\n        for (let index = 0; index < this.dialogRows.length; index++) {\r\n            this.cell=this.dialogRows[index].split(',')\r\n            if(this.cell[0]=='#'&&parseInt(this.cell[1])==this.dialogindex){\r\n                this.canPress=true\r\n                this.updateText(this.cell[2],this.cell[3])\r\n                this.dialogindex=parseInt(this.cell[4])\r\n                this.DialogueFunc(this.cell[5])\r\n                console.log(this.cell[4])\r\n                \r\n                if(this.cell[4]==''){\r\n                    if(this.eventHandler[this.dialogindex]){\r\n                        this.eventHandler[this.dialogindex].emit([])\r\n                    }\r\n                    console.log('endFunc')\r\n                    this.endFunc()\r\n                }\r\n                break\r\n            }else if(this.cell[0]=='&'&&parseInt(this.cell[1])==this.dialogindex){\r\n                this.canPress=false\r\n                this.GenerateOption(index)\r\n            }\r\n        }\r\n    }   \r\n    onOptionClick(id:number){\r\n        \r\n        this.dialogindex=id\r\n        this.showDialogRow()\r\n        for (let index = 0; index < this.Layout.getComponentsInChildren(Button).length ; index++){\r\n            this.Layout.node.destroyAllChildren()\r\n        }\r\n    }\r\n    //对话选项绑定函数\r\n    DialogueChooseFunc(cell5){\r\n        let cell=parseInt(cell5)\r\n        console.log(cell)\r\n        //选择CSV文件中的《事件》id，所执行对应的代码\r\n        //事件必须出现在&对活里\r\n        switch(cell){\r\n            case 0:\r\n                switch(this.node.name){\r\n                    case '老师要来找我麻烦了':\r\n                        dialogLocalData.setSysLocalAboutDIalog('老师要来找我麻烦了',action.add)\r\n                        console.log('666')\r\n                        break\r\n                    \r\n                }\r\n               \r\n                break\r\n        }\r\n        \r\n    }\r\n    endFunc(){\r\n        console.log(this.node.name)\r\n        switch(this.node.name){\r\n            case '老师有人带手机':\r\n                find('Canvas/Camera/blackFront').active=true\r\n                break\r\n            case '高中生涯规划':\r\n                find('Canvas/Camera/blackFront').active=true\r\n                break\r\n            case '填写实验数据':\r\n                find('Canvas/blackFront').active=true\r\n                break\r\n            case '收集实验数据':\r\n                director.loadScene('发到班级群_自选课题')\r\n                break\r\n            case '肖老师讲故事':\r\n                director.loadScene('classroom_自选课题')\r\n                break\r\n            case '志远快上去关掉':\r\n                //director.loadScene('走廊')\r\n                break\r\n            case '看完南京大屠杀的感悟':\r\n                break\r\n            case '今天是什么日子大家心里清楚':\r\n                find('Canvas/南京大屠杀').active=true\r\n                break\r\n            case 'xf上课':\r\n                find('Canvas/语文老师12月13日').active=true\r\n                break\r\n            case '做问卷调查':\r\n                console.log(dialogLocalData.getSysLocalAboutDialog())\r\n                if(dialogLocalData.getSysLocalAboutDialogDOM('重写问卷')){\r\n                    console.log('失败了！！！')\r\n                    find('Canvas/computer2/重写问卷').active=true\r\n                    dialogLocalData.setSysLocalAboutDIalog('重写问卷',action.delete)\r\n                }else{\r\n                    find('Canvas/收集实验数据').active=true\r\n                    console.log('成功了！！！')\r\n                }\r\n                \r\n                break\r\n            case '做技术课题':\r\n                if(dialogLocalData.getSysLocalAboutDialogDOM('问卷调查')){\r\n                    console.log('成功啦！！！')\r\n                    find('Canvas/computer2/Text').active=true\r\n                    find('Canvas/computer2/重写').active=false\r\n                }else{\r\n                    find('Canvas/computer2/重写').active=true\r\n                }\r\n                dialogLocalData.setSysLocalAboutDIalog('ai生成',action.delete)\r\n                dialogLocalData.setSysLocalAboutDIalog('问卷调查',action.delete)\r\n                break\r\n            case '老师拿手机':\r\n                director.loadScene('办公室')\r\n                break\r\n            case '贵屿中学我来了':\r\n                director.loadScene('home_2floor_livingroom-phone')\r\n                break\r\n            case '老师要来找我麻烦了':\r\n                console.log(dialogLocalData.getSysLocalAboutDialog())\r\n                    if(dialogLocalData.getSysLocalAboutDialogDOM('保证不带手机')){\r\n                        if(dialogLocalData.getSysLocalAboutDialogDOM('签了字')){\r\n                        }else{\r\n                            if(dialogLocalData.getSysLocalAboutDialogDOM('老师要来找我麻烦了')){\r\n                            find('Canvas/你刚才还说老师要来找你麻烦').active=true\r\n                        }else{\r\n                            find('Canvas/接受道歉').active=true\r\n                        }\r\n                        }\r\n                        \r\n                        \r\n                }else if(dialogLocalData.getSysLocalAboutDialogDOM('在停学书上做文章')){\r\n                   \r\n                }\r\n                dialogLocalData.setSysLocalAboutDIalog('签了字',action.delete)\r\n                dialogLocalData.setSysLocalAboutDIalog('老师要来找我麻烦了',action.delete)\r\n                dialogLocalData.setSysLocalAboutDIalog('保证不带手机',action.delete)\r\n                dialogLocalData.setSysLocalAboutDIalog('在停学书上做文章',action.delete)\r\n                console.log(dialogLocalData.getSysLocalAboutDialog(),dialogLocalData.getSysLocalAboutDialogDOM('保证不带手机'))\r\n                break\r\n        }\r\n        if(this.endDelete==true){\r\n            console.log('dddd')\r\n            this.node.active=false\r\n        }\r\n        this.canRestart=true\r\n        \r\n    }\r\n    Restart(){\r\n        this.readText(this.csv)\r\n        this.dialogindex=0\r\n        this.cell=this.dialogRows[1].split(',')\r\n        if(this.canRestart==true){\r\n            this.showDialogRow()\r\n            this.canRestart=false\r\n        }\r\n       \r\n    }\r\n    DialogueFunc(cell5){\r\n        let cell=parseInt(cell5)\r\n        console.log(cell)\r\n        //选择CSV文件中的《事件》id，所执行对应的代码\r\n         //事件必须出现在#对活里\r\n        switch(cell){\r\n            case 0:\r\n                switch(this.csv.name){\r\n                    case '不如带个坏手机':\r\n                        find('Canvas/2.5d/desk/手机').destroy()\r\n                        //sys.localStorage.setItem('不如带个坏手机',JSON.stringify(true))\r\n                        dialogLocalData.setSysLocalAboutDIalog('不如带个坏手机',action.add)\r\n                        break\r\n                    case '做技术课题':\r\n                        dialogLocalData.setSysLocalAboutDIalog('ai生成',action.add)\r\n                        break\r\n                    case '做问卷调查':\r\n                        dialogLocalData.setSysLocalAboutDIalog('重写问卷',action.add)\r\n                        break\r\n                }\r\n                \r\n                console.log('带手机到学校')\r\n                break\r\n            case 1:\r\n                switch(this.node.name){\r\n                    case '老师要来找我麻烦了':\r\n                        dialogLocalData.setSysLocalAboutDIalog('保证不带手机',action.add)\r\n                        console.log('666')\r\n                        break\r\n                    case '做技术课题':\r\n                        dialogLocalData.setSysLocalAboutDIalog('问卷调查',action.add)\r\n                        break\r\n                    \r\n                }\r\n                console.log('不带手机到学校')\r\n                break\r\n            case 2:\r\n                switch(this.node.name){\r\n                    case '老师要来找我麻烦了':\r\n                        dialogLocalData.setSysLocalAboutDIalog('在停学书上做文章',action.add)\r\n                        console.log('666')\r\n                        break\r\n                    \r\n                }\r\n                console.log('不带手机到学校')\r\n                break\r\n            case 3:\r\n                switch(this.node.name){\r\n                    case '老师要来找我麻烦了':\r\n                        dialogLocalData.setSysLocalAboutDIalog('签了字',action.add)\r\n                        director.loadScene('home_2floor_livingroom-停学')\r\n                        break\r\n                    \r\n                }\r\n                console.log('不带手机到学校')\r\n                break\r\n        }\r\n    }\r\n    \r\n    GenerateOption(_index: number) {\r\n        while (true) {\r\n            this.cell = this.dialogRows[_index].split(',');\r\n            if (this.cell[0] == '&') {\r\n                let button= instantiate(this.optionButton);\r\n                button.setParent(this.Layout.node);\r\n                let cell1=this.cell[1]\r\n                let dd = this.cell[4];\r\n                let cell = this.cell[5];\r\n                let condition=this.cell[6];\r\n                \r\n                this.isChoose=true\r\n                let ooc = () => {\r\n                    this.isChoose=false\r\n                    this.DialogueChooseFunc(cell);\r\n                    this.onOptionClick(parseInt(dd));\r\n                    if( this.eventHandler[cell1]){\r\n                        this.eventHandler[cell1].emit([])\r\n                    }\r\n                };\r\n                button.on(Button.EventType.CLICK, ooc, this);\r\n                button.getComponentInChildren(Label).string = this.cell[3];\r\n                //语法：“名字”:“值”\r\n                console.log(typeof condition)\r\n                if(condition!){\r\n                    const condition2  =condition.replace(/[^a-zA-Z0-9 :]/g, '')\r\n                    let celll=condition2.split(':')\r\n                    console.log(celll,condition2)\r\n                    console.log(sys.localStorage.getItem(celll[0]),celll[1])\r\n                    if(sys.localStorage.getItem(celll[0])==celll[1]){\r\n                        button.getComponent(Button).interactable=true\r\n                    }else{\r\n                        button.getComponent(Button).interactable=false\r\n                    }\r\n                }\r\n                _index++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    onClickNext(){\r\n        /*this.button_next.node.active=true\r\n        this.cell=this.dialogRows[parseInt(this.jumptext)].split(',')\r\n        this.dialogindex=parseInt(this.cell[4])*/\r\n        this.showDialogRow()\r\n    }\r\n}\r\n    \r\n\r\n\r\n\r\n"]}