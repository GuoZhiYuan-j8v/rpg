{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/tools/interaction/contact_interaction.ts"],"names":["Collider2D","Contact2DType","_decorator","Enum","interaction","interactionEvent","dialogLocalData","ccclass","property","contactType","contact_interaction","type","contact","onLoad","voidOnce","getSysLocalAboutDialogDOM","node","uuid","NONE","console","log","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","selfCollider","otherCollider","name","Contact","interactionContactFunction","value","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;AACZC,MAAAA,U,OAAAA,U;AAEAC,MAAAA,I,OAAAA,I;;AADAC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,gB,iBAAAA,gB;;AAEbC,MAAAA,e,iBAAAA,e;;;;;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;AACzBO,MAAAA,W,0BAAAA,W;AAAAA,QAAAA,W,CAAAA,W;AAAAA,QAAAA,W,CAAAA,W;eAAAA,W;QAAAA,W;;AAILN,MAAAA,IAAI,CAACM,WAAD,CAAJ;;qCAEaC,mB,WADZH,OAAO,CAAC,qBAAD,C,UAEHC,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAEF;AAAR,OAAD,C,2BAFb,MACaC,mBADb;AAAA;AAAA,sCACqD;AAAA;AAAA;;AAAA;;AAAA,eAGjDE,OAHiD,GAG9B,KAH8B;AAAA;;AAKjDC,QAAAA,MAAM,GAAG;AACL,cAAI,KAAKC,QAAL,IAAiB,IAAjB,IAAyB,QAAQ;AAAA;AAAA,kDAAgBC,yBAAhB,CAA0C,KAAKC,IAAL,CAAUC,IAApD,CAArC,EAAgG;AAC5F,iBAAKZ,gBAAL,GAAwB;AAAA;AAAA,sDAAiBa,IAAzC;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACH;AACJ;;AACDC,QAAAA,KAAK,GAAG;AACJ,cAAIC,QAAQ,GAAG,KAAKN,IAAL,CAAUO,YAAV,CAAuBvB,UAAvB,CAAf;;AACA,cAAIsB,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACE,EAAT,CAAYvB,aAAa,CAACwB,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACAJ,YAAAA,QAAQ,CAACE,EAAT,CAAYvB,aAAa,CAAC0B,WAA1B,EAAuC,KAAKC,YAA5C,EAA0D,IAA1D;AACH;AACJ;;AACDF,QAAAA,cAAc,CAACG,YAAD,EAA2BC,aAA3B,EAAsD;AAChE,cAAIA,aAAa,CAACd,IAAlB,EAAwB;AAAA;;AACpB,gBAAI,wBAAAc,aAAa,CAACd,IAAd,yCAAoBe,IAApB,KAA4B,QAAhC,EAA0C;AACtC,mBAAKC,OAAL,GAAe,IAAf;AACH;AACJ;AAEJ;;AACDC,QAAAA,0BAA0B,GAAS;AAC/B,gBAAMA,0BAAN;AACH;;AACU,YAAPD,OAAO,CAACE,KAAD,EAAiB;AACxB,cAAI,KAAKtB,OAAL,IAAgBsB,KAApB,EAA2B;AACvB,iBAAKtB,OAAL,GAAesB,KAAf;;AACA,gBAAIA,KAAK,IAAI,IAAT,IAAiB,KAAKzB,WAAL,IAAoBA,WAAW,CAACiB,cAArD,EAAqE;AACjE,mBAAKO,0BAAL;AACH,aAFD,MAEO,IAAIC,KAAK,IAAI,KAAT,IAAkB,KAAKzB,WAAL,IAAoBA,WAAW,CAACmB,YAAtD,EAAoE;AACvE,mBAAKK,0BAAL;AACH;AACJ;AAEJ;;AACU,YAAPD,OAAO,GAAG;AACV,iBAAO,KAAKpB,OAAZ;AACH;;AACDgB,QAAAA,YAAY,CAACC,YAAD,EAA2BC,aAA3B,EAAsD;AAC9D,cAAIA,aAAa,CAACd,IAAlB,EAAwB;AAAA;;AACpB,gBAAI,yBAAAc,aAAa,CAACd,IAAd,0CAAoBe,IAApB,KAA4B,QAAhC,EAA0C;AACtC,mBAAKC,OAAL,GAAe,KAAf;AACH;AACJ;AACJ;;AACDG,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AApDgD,O;;;;;iBAEtB3B,WAAW,CAACiB,c","sourcesContent":["import { Collider2D, Contact2DType } from 'cc';\r\nimport { _decorator, Component, Node } from 'cc';\r\nimport { interaction, interactionEvent } from './interaction';\r\nimport { Enum } from 'cc';\r\nimport { dialogLocalData } from '../本地存储/dialogLocal';\r\nconst { ccclass, property } = _decorator;\r\nenum contactType {\r\n    onBeginContact,\r\n    onEndContact,\r\n}\r\nEnum(contactType)\r\n@ccclass('contact_interaction')\r\nexport class contact_interaction extends interaction {\r\n    @property({ type: contactType })\r\n    contactType: contactType = contactType.onBeginContact\r\n    contact: boolean = false\r\n\r\n    onLoad() {\r\n        if (this.voidOnce == true && true == dialogLocalData.getSysLocalAboutDialogDOM(this.node.uuid)) {\r\n            this.interactionEvent = interactionEvent.NONE\r\n            console.log('NONE')\r\n        }\r\n    }\r\n    start() {\r\n        let collider = this.node.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this)\r\n        }\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.node) {\r\n            if (otherCollider.node?.name == 'Player') {\r\n                this.Contact = true\r\n            }\r\n        }\r\n\r\n    }\r\n    interactionContactFunction(): void {\r\n        super.interactionContactFunction()\r\n    }\r\n    set Contact(value: boolean) {\r\n        if (this.contact != value) {\r\n            this.contact = value\r\n            if (value == true && this.contactType == contactType.onBeginContact) {\r\n                this.interactionContactFunction()\r\n            } else if (value == false && this.contactType == contactType.onEndContact) {\r\n                this.interactionContactFunction()\r\n            }\r\n        }\r\n\r\n    }\r\n    get Contact() {\r\n        return this.contact\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        if (otherCollider.node) {\r\n            if (otherCollider.node?.name == 'Player') {\r\n                this.Contact = false\r\n            }\r\n        }\r\n    }\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}