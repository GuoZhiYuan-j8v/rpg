{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/tools/interaction/interaction.ts"],"names":["_decorator","Component","director","Enum","find","input","Input","instantiate","Node","Prefab","SceneAsset","sys","TextAsset","EventHandler","Animation","AnimationClip","action","dialog_galgame","settingData","StateType","bag","dialogLocalData","ccclass","property","interactionEvent","compareNumber","localStoarge","inventory","State","type","tooltip","心情","dialogLocalSet","interaction","visible","启用条件","isUseMezi","scene","prefab","isDialog","localStorage","value","alert","path","animation","once","dialogIndex","funcFinished","interactionContactFunction","func","console","log","getSysLocalAboutDialog","setSysLocalAboutDIalog","key","add","getComponent","changeStateValue","changeValue","changeNumber","play","animationClip","name","isMezi","dialogPath","Restart","active","length","destroy","isEmitFrontScene","setItem","getScene","getItem","loadScene","instantiateNode","setParent","setPosition","csv","eventHandler","dialogEventHandler","instantiateParent","alertMessage","i","emit","voidOnce","node","uuid","canInteraciton","fuckYou","forEach","index","Key","Value","else","inventroy","bagScript","checkHas","meziName","Count","compareWithStateType","compareType","number","getSysLocalAboutDialogDOM","dialogLocal","EqualType","UseMezi","mezi","NeedlyMezi","MeziOnce","delete","stateType","loadCSV","onDestroy","off","EventType","KEY_DOWN","onKeyDown","onLoad","NONE","on","FINISHED","state","clip","onAnimationFinishedFunc","element","event","keyCode","parseInt","interactionQuit","canQuit","setTimeout","金钱"],"mappings":"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","sourcesContent":["import { __private, _decorator, Component, director, Enum, EventKeyboard, find, input, Input, instantiate, Node, Prefab, resources, SceneAsset, sys, TextAsset } from 'cc';\nimport { action, dialog_galgame } from '../dialog/typeScript/dialog_galgame';\nimport { mezi } from '../inventory/script/mezi';\nimport { EventHandler } from 'cc';\nimport { Animation } from 'cc';\nimport { AnimationClip } from 'cc';\nimport { AnimationState } from 'cc';\nimport { settingData, StateType } from '../../UI/settingData';\nimport { bag } from '../inventory/script/bag';\nimport { dialogLocalData } from '../本地存储/dialogLocal';\nimport { EventTouch } from 'cc';\nEnum(StateType)\nconst { ccclass, property } = _decorator;\nexport enum interactionEvent {\n    scene,\n    path,\n    prefab,\n    animation,\n    NONE,\n    alert,\n    value,\n    localStorage,\n}\nenum compareNumber {\n    '==',\n    '>=',\n    '<=',\n    '>',\n    '<',\n}\nEnum(compareNumber)\n@ccclass('localStoarge')\nclass localStoarge {\n    @property\n    Key: string = ''\n    @property\n    Value: string = ''\n}\n@ccclass('inventory')\nclass inventory {\n    @property\n    meziName: string = ''\n    @property\n    Count: number = 1\n}\n@ccclass('State')\nclass State {\n\n    @property\n    number: number = 0\n    @property({ type: compareNumber, tooltip: 'number在左边,StateType在右边' })\n    compareType: compareNumber = compareNumber['<']\n    @property({ type: StateType })\n    StateType: StateType = StateType.心情\n\n}\n@ccclass('dialogLocalSet')\nclass dialogLocalSet {\n    @property\n    dialogLocal: string = ''\n    @property\n    EqualType: boolean = true\n}\n// @ccclass('confidentsetter')\n// class confidentsetter{\n//     @property({type:localStoarge})\n//     localStorage:localStoarge[]=[];\n//     @property({type:State})\n//     State:State[]=[];\n//     @property({type:inventory})\n//     inventory:inventory[]=[];\n// }\nEnum(interactionEvent)\n@ccclass('interaction')\nexport class interaction extends Component {\n    @property\n    canInteraction: boolean = true\n    @property\n    voidOnce: boolean = false\n    @property\n    启用条件: boolean = false\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true\n        }\n    })\n    else: boolean = false;\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true\n        }, type: localStoarge\n    })\n    localStorage: localStoarge[] = [];\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true\n        }, type: inventory\n    })\n    inventroy: inventory[] = [];\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true\n        }, type: State\n    })\n    State: State[] = [];\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true\n        }, type: dialogLocalSet\n    })\n    dialogLocalSet: dialogLocalSet[] = []\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true && this.isUseMezi == true\n        }\n    })\n    NeedlyMezi: string = ''\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true && this.isUseMezi == true\n        }\n    })\n    MeziOnce: boolean = false\n    @property({\n        visible: function (this: interaction) {\n            return this.启用条件 === true\n        }\n    })\n    isUseMezi: boolean = false\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.scene\n        }\n    })\n    isEmitFrontScene: boolean = false\n    @property([EventHandler])\n    eventHandler: EventHandler[] = []\n\n    @property({\n        type: [EventHandler], visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.prefab && this.isDialog == true\n        }\n    })\n    dialogEventHandler: EventHandler[] = []\n    @property\n    canQuit: boolean = false\n    once: number = 0\n    @property\n    finishedTalk: boolean = false\n    @property\n    isMezi: boolean = false\n    @property\n    isDialog: boolean = false\n    @property({ type: interactionEvent })\n    interactionEvent = interactionEvent.NONE\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.localStorage;\n        }\n    })\n    key: string = '';\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.value;\n        }, type: StateType\n    })\n    changeValue: StateType = StateType.金钱\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.value;\n        }\n    })\n    changeNumber: number = 10\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.alert;\n        }, type: Node\n    })\n    alertMessage: Node = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.path && this.isDialog == false;\n        }, type: Node\n    })\n    path: Node = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.animation;\n        }, type: Animation\n    })\n    animation: Animation = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.animation;\n        }, type: AnimationClip\n    })\n    animationClip: AnimationClip = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.animation;\n        }, type: [EventHandler]\n    })\n    onAnimationFinishedFunc: EventHandler[] = []\n    @property({\n        type: TextAsset,\n        visible: function (this: interaction) {\n            return this.isDialog === true && this.interactionEvent === interactionEvent.prefab\n        }\n    })\n    csv: TextAsset = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.scene;\n        }, type: SceneAsset\n    })\n    scene: SceneAsset = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.prefab;\n        }, type: Prefab\n    })\n    instantiateNode: Prefab = null!;\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.prefab && this.isDialog == false;\n        }, type: Node\n    })\n    instantiateParent: Node = null!\n    @property({\n        visible: function (this: interaction) {\n            return this.interactionEvent === interactionEvent.path && this.isDialog == true\n        }, type: Node\n    })\n    dialogPath: Node[] = []\n    dialogIndex: number = 0;\n    interactionContactFunction() {\n        let func = () => {\n\n            switch (this.interactionEvent) {\n                case interactionEvent.localStorage:\n                    console.log(dialogLocalData.getSysLocalAboutDialog())\n                    dialogLocalData.setSysLocalAboutDIalog(this.key, action.add)\n                case interactionEvent.value:\n                    find('data').getComponent(settingData).changeStateValue(this.changeValue, this.changeNumber)\n                    break\n                case interactionEvent.animation:\n                    this.animation.play(this.animationClip.name)\n                    break\n                case interactionEvent.path:\n                    if (this.isMezi == false) {\n\n                        if (this.isDialog == true) {\n                            this.dialogPath[this.dialogIndex].getComponent(dialog_galgame).Restart()\n                            this.dialogPath[this.dialogIndex].active = true\n                            if (this.dialogPath.length > this.dialogIndex + 1) {\n                                this.dialogIndex++\n                            }\n                            console.log('dp' + this.dialogIndex)\n                        } else {\n                            if (this.path.active == false) {\n                                this.path.active = true\n                            } else if (this.path.active == true) {\n                                this.path.active = false\n                            }\n\n                        }\n                    } else if (this.isMezi == true) {\n                        this.path.destroy()\n                    }\n                    break\n                case interactionEvent.scene:\n                    if (this.isEmitFrontScene == true) {\n                        sys.localStorage.setItem('FrontScene', director.getScene().name)\n                        console.log('emitScene', sys.localStorage.getItem('FrontScene'))\n                    }\n                    director.loadScene(this.scene.name)\n                    break\n                case interactionEvent.prefab:\n\n                    if (this.isDialog == true) {\n                        let prefab = instantiate(this.instantiateNode)\n                        prefab.setParent(find('Canvas'))\n                        prefab.setPosition(0, 0, 0)\n                        prefab.getComponent(dialog_galgame).csv = this.csv\n                        prefab.getComponent(dialog_galgame).eventHandler = this.dialogEventHandler\n                    } else {\n                        let prefab = instantiate(this.instantiateNode)\n                        prefab.setParent(this.instantiateParent)\n                        prefab.setPosition(0, 0, 0)\n                    }\n\n                    break\n                case interactionEvent.alert:\n                    alert(this.alertMessage)\n                    break\n            }\n            for (let i = 0; i < this.eventHandler.length; i++) {\n                this.eventHandler[i].emit([])\n            }\n            if (this.voidOnce == true) {\n                console.log('uuid', this.node.uuid)\n                dialogLocalData.setSysLocalAboutDIalog(this.node.uuid, action.add)\n            }\n        }\n        if (this.启用条件 == false) {\n            func()\n        } else {\n            let canInteraciton: boolean = true\n            let fuckYou = false\n            this.localStorage.forEach((value, index) => {\n                if (sys.localStorage.getItem(value.Key) == value.Value) {\n                    if (this.else == true) {\n                        fuckYou = true\n                    }\n                } else {\n\n                    canInteraciton = false\n                }\n            })\n            this.inventroy.forEach((value, index) => {\n                let bagScript = find('Canvas/Camera/bag/view/content').getComponent(bag)\n                if (bagScript.checkHas(value.meziName, value.Count)) {\n                    if (this.else == true) {\n                        fuckYou = true\n                    }\n                } else {\n\n                    canInteraciton = false\n                }\n            })\n            this.State.forEach(value => {\n                if (this.else == true) {\n                    fuckYou = true\n                }\n                if (this.compareWithStateType(value.compareType, value.number) == false) {\n                    canInteraciton = false\n                    fuckYou = false\n                }\n\n            })\n            this.dialogLocalSet.forEach(value => {\n                if (dialogLocalData.getSysLocalAboutDialogDOM(value.dialogLocal) == value.EqualType) {\n                    console.log(dialogLocalData.getSysLocalAboutDialogDOM(value.dialogLocal))\n                    if (this.else == true) {\n                        fuckYou = true\n                    }\n                } else {\n\n                    canInteraciton = false\n                }\n            })\n\n            if (fuckYou == false && this.else == true) {\n                func()\n            }\n\n            if (canInteraciton == true && this.isUseMezi == false && this.else == false) {\n                func()\n            }\n        }\n\n    }\n    UseMezi(mezi: string) {\n        let func = () => {\n\n            switch (this.interactionEvent) {\n                case interactionEvent.localStorage:\n                    console.log(dialogLocalData.getSysLocalAboutDialog())\n                    dialogLocalData.setSysLocalAboutDIalog(this.key, action.add)\n                case interactionEvent.value:\n                    find('data').getComponent(settingData).changeStateValue(this.changeValue, this.changeNumber)\n                    break\n                case interactionEvent.animation:\n                    this.animation.play(this.animationClip.name)\n                    break\n                case interactionEvent.path:\n                    if (this.isMezi == false) {\n\n                        if (this.isDialog == true) {\n                            this.dialogPath[this.dialogIndex].getComponent(dialog_galgame).Restart()\n                            this.dialogPath[this.dialogIndex].active = true\n                            if (this.dialogPath.length > this.dialogIndex + 1) {\n                                this.dialogIndex++\n                            }\n                            console.log('dp' + this.dialogIndex)\n                        } else {\n                            if (this.path.active == false) {\n                                this.path.active = true\n                            } else if (this.path.active == true) {\n                                this.path.active = false\n                            }\n\n                        }\n                    } else if (this.isMezi == true) {\n                        this.path.destroy()\n                    }\n                    break\n                case interactionEvent.scene:\n                    if (this.isEmitFrontScene == true) {\n                        sys.localStorage.setItem('FrontScene', director.getScene().name)\n                        console.log('emitScene', sys.localStorage.getItem('FrontScene'))\n                    }\n                    director.loadScene(this.scene.name)\n                    break\n                case interactionEvent.prefab:\n\n                    if (this.isDialog == true) {\n                        let prefab = instantiate(this.instantiateNode)\n                        prefab.setParent(find('Canvas'))\n                        prefab.setPosition(0, 0, 0)\n                        prefab.getComponent(dialog_galgame).csv = this.csv\n                        prefab.getComponent(dialog_galgame).eventHandler = this.dialogEventHandler\n                    } else {\n                        let prefab = instantiate(this.instantiateNode)\n                        prefab.setParent(this.instantiateParent)\n                        prefab.setPosition(0, 0, 0)\n                    }\n\n                    break\n                case interactionEvent.alert:\n                    alert(this.alertMessage)\n            }\n            for (let i = 0; i < this.eventHandler.length; i++) {\n                this.eventHandler[i].emit([])\n            }\n        }\n        if (this.启用条件 == false) {\n            func()\n        } else {\n            let canInteraciton: boolean = true\n            this.localStorage.forEach((value, index) => {\n                if (sys.localStorage.getItem(value.Key) == value.Value) {\n\n                } else {\n                    canInteraciton = false\n                }\n            })\n            this.inventroy.forEach((value, index) => {\n                let bagScript = find('Canvas/Camera/bag/view/content').getComponent(bag)\n                if (bagScript.checkHas(value.meziName)) {\n\n                } else {\n                    canInteraciton = false\n                }\n            })\n            this.State.forEach(value => {\n                if (this.compareWithStateType(value.compareType, value.number) == false) {\n                    canInteraciton = false\n                }\n            })\n            this.dialogLocalSet.forEach(value => {\n                if (dialogLocalData.getSysLocalAboutDialogDOM(value.dialogLocal) == value.EqualType) {\n                    console.log(dialogLocalData.getSysLocalAboutDialogDOM(value.dialogLocal))\n                } else {\n                    canInteraciton = false\n                }\n            })\n        }\n\n\n        if (this.isUseMezi == true) {\n            if (this.NeedlyMezi == mezi) {\n                if (this.MeziOnce == true) {\n                    find('Canvas/Camera/bag/view/content').getComponent(bag).delete(this.NeedlyMezi)\n                }\n                func()\n            }\n        }\n    }\n    compareWithStateType(stateType: compareNumber, number: number): boolean {\n        switch (stateType) {\n            case compareNumber['==']:\n                return number == stateType;\n            case compareNumber['>=']:\n                return number >= stateType;\n            case compareNumber['<=']:\n                return number <= stateType;\n            case compareNumber['>']:\n                return number > stateType;\n            case compareNumber['<']:\n                return number < stateType;\n\n        }\n    }\n    loadCSV() {\n\n    }\n    onDestroy() {\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n\n    }\n    onLoad() {\n        if (this.voidOnce == true && true == dialogLocalData.getSysLocalAboutDialogDOM(this.node.uuid)) {\n            this.interactionEvent = interactionEvent.NONE\n            console.log('NONE')\n        }\n        if (this.animation) {\n            this.animation.on(Animation.EventType.FINISHED, (type: Animation.EventType, state: AnimationState) => {\n                if (this.animationClip.name == state.clip.name)\n                    this.onAnimationFinishedFunc.forEach(element => {\n                        element.emit([])\n                    })\n            })\n        }\n\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this)\n        console.log('drag666')\n    }\n    onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case parseInt(sys.localStorage.getItem('next')):\n                this.interactionQuit()\n                console.log('press_next')\n                break;\n        }\n    }\n    interactionQuit() {\n\n        //判断交互物体是否指向对话，如果不是，按下继续（next）键即可关闭生成的prefab\n        if (this.canQuit == true) {\n            switch (this.interactionEvent) {\n                case interactionEvent.path:\n                    if (this.isDialog == false) {\n                        this.path.active = false\n                    }\n\n                    break\n                case interactionEvent.prefab:\n\n                    if (this.isDialog == false) {\n                        setTimeout(() => {\n                            if (this.path) {\n                                this.path.destroy()\n                            }\n\n                        });\n\n                    }\n\n                    break\n            }\n        }\n\n    }\n    funcFinished: boolean\n}\n\n"]}