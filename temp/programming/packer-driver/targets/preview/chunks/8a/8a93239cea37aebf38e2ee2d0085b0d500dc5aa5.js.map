{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/tools/inventory/script/mezi.ts"],"names":["_decorator","Node","find","EventMouse","Collider2D","Contact2DType","UITransform","v3","Camera","Layout","director","instantiate","SpriteFrame","Sprite","size","bag","interaction","interactionEvent","action","dialog_galgame","canChooseFood","StateType","settingData","PlayerLocal","dialogLocalData","group","Player","ccclass","property","mezi","visible","isFood","canPick","contact","parentPath","playercontact","isTouch","info","update","dt","node","parent","name","setPosition","onLoad","voidOnce","getSysLocalAboutDialogDOM","uuid","active","pressEvent","getPath","PlayerNode","PlayerPath","console","log","getPathInHierarchy","PlayerScript","getComponent","interactionName","getComponents","forEach","element","UseMezi","path","scene","runScene","prefab","instantiateNode","setParent","isDialog","galgame","csv","endDelete","eventHandler","dialogEventHandler","ChooseFood","interactionContactFunction","start","sizeMode","SizeMode","CUSTOM","contentSize","spriteFrame","在背包中的立绘","layer","collider","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","EventType","MOUSE_UP","event","getButton","BUTTON_LEFT","TOUCH_END","parentBag","delete","alignHorizontal","TOUCH_CANCEL","TOUCH_MOVE","e","screenToWorld","getLocation","x","y","setWorldPosition","selfCollider","otherCollider","setSysLocalAboutDIalog","add","destroy","onDestroy","inventory","bagNode","data","changeStateValue","饱食","增加的饱食度"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, find, EventTouch, EventMouse, Collider2D, Contact2DType, IPhysics2DContact, Prefab, UITransform, v3, Camera, Enum, Layers, DynamicAtlasManager, AffineTransform, RigidBody2D, Terrain, Layout, director, instantiate, SpriteFrame, Sprite, inverseLerp, input, Input, EventKeyboard, KeyCode } from 'cc';\r\nimport { bag } from './bag';\r\nimport { interaction, interactionEvent } from '../../interaction/interaction';\r\nimport { action, dialog_galgame } from '../../dialog/typeScript/dialog_galgame';\r\nimport { size } from 'cc';\r\nimport { canChooseFood } from '../../烹饪/canChooseFood';\r\nimport { StateType, settingData } from '../../../UI/settingData';\r\nimport { PlayerLocal } from '../../../Player/script/PlayerLocalData';\r\nimport { dialogLocalData } from '../../本地存储/dialogLocal';\r\nimport { group, Player } from 'db://assets/Player/script/Player';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('mezi')\r\nexport class mezi extends interaction {\r\n\r\n    @property({\r\n        visible: function (this: mezi) {\r\n            return this.isFood == true\r\n        }\r\n    })\r\n    增加的饱食度: number = 30\r\n    @property\r\n    isIngredients: boolean = false\r\n    @property(SpriteFrame)\r\n    在背包中的立绘: SpriteFrame = null!\r\n    canPick: boolean = true\r\n    contact: boolean = false\r\n    parentPath: string = ''\r\n    @property\r\n    isFood = false\r\n    playercontact: boolean;\r\n    isTouch: boolean;\r\n    info: string = \"\"\r\n    protected update(dt: number): void {\r\n        if (this.node.parent.parent.name == 'windows') {\r\n            this.node.setPosition(0, 0, 0)\r\n        }\r\n    }\r\n    onLoad(): void {\r\n        super.onLoad()\r\n        if (this.voidOnce == true && true == dialogLocalData.getSysLocalAboutDialogDOM(this.node.uuid)) {\r\n            this.node.active = false\r\n        }\r\n       \r\n    }\r\n    pressEvent() {\r\n        if (this.node.parent.name == 'content') {\r\n            PlayerLocal.getPath()\r\n            let PlayerNode = find(PlayerLocal.PlayerPath)\r\n            console.log(PlayerNode.getPathInHierarchy(), 'Playeryyy')\r\n            if (PlayerNode) {\r\n                let PlayerScript = PlayerNode.getComponent(Player)\r\n                if (PlayerScript.contact == true) {\r\n\r\n                    PlayerScript.interactionName.getComponents(interaction).forEach(element => {\r\n                        element.UseMezi(this.node.name)\r\n                    })\r\n                }\r\n                console.log(PlayerScript.contact)\r\n            }\r\n            console.log('bagbag')\r\n\r\n            switch (this.interactionEvent) {\r\n                case interactionEvent.path:\r\n                    this.path.active = true\r\n                    break\r\n                case interactionEvent.scene:\r\n                    director.runScene(this.scene)\r\n                    break\r\n                case interactionEvent.prefab:\r\n                    let prefab = instantiate(this.instantiateNode)\r\n                    prefab.setParent(find('Canvas'))\r\n                    prefab.setPosition(0, 0, 0)\r\n                    if (this.isDialog == true) {\r\n                        let galgame = prefab.getComponent(dialog_galgame)\r\n                        galgame.csv = this.csv\r\n                        galgame.endDelete = true\r\n                        galgame.eventHandler = this.dialogEventHandler\r\n                    }\r\n                    this.info = prefab.getPathInHierarchy()\r\n                    console.log(prefab)\r\n                    break\r\n            }\r\n        }\r\n        if (this.node.parent.name == 'windows') {\r\n            this.node.parent.getComponent(canChooseFood).ChooseFood = this.node\r\n            console.log('123')\r\n        }\r\n        if (this.node.parent.name == '布局') {\r\n            this.interactionContactFunction()\r\n        }\r\n        console.log(this.node.parent.name)\r\n    }\r\n   \r\n    start() {\r\n        if (this.node.parent.name == 'content') {\r\n            this.canPick = false\r\n            this.node.getComponent(Sprite).sizeMode = Sprite.SizeMode.CUSTOM\r\n            this.node.getComponent(UITransform).contentSize = size(128, 128)\r\n            this.node.getComponent(Sprite).spriteFrame = this.在背包中的立绘\r\n        }\r\n        console.log(this.node.layer)\r\n        let collider = this.getComponent(Collider2D);\r\n\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n        }\r\n        this.node.on(Node.EventType.MOUSE_UP, (event: EventMouse) => {\r\n            switch (event.getButton()) {\r\n                case EventMouse.BUTTON_LEFT:\r\n                    if (this.isTouch == false) {\r\n                        this.pressEvent()\r\n                    } else {\r\n                        this.isTouch = false\r\n                    }\r\n\r\n                    break\r\n                /*case EventMouse.BUTTON_RIGHT:\r\n                    console.log('菜单'+this.node.name)\r\n                    break*/\r\n            }\r\n        })\r\n        this.node.on(Node.EventType.TOUCH_END, (event: EventTouch) => {\r\n\r\n            if (this.node.parent.name == 'content') {\r\n                let parentBag = this.node.parent.getComponent(bag)\r\n                //检测拖拽到玩家身上且是食物就吃掉\r\n                if (this.playercontact == true && this.isFood == true) {\r\n                    parentBag.delete(this.node.name)\r\n                }\r\n                if (this.contact == true) {\r\n                    console.log('put it up')\r\n                    parentBag.delete(this.node.name, this.parentPath)\r\n                    console.log(this.node.parent.name)\r\n                }\r\n                parentBag.getComponent(bag).alignHorizontal()\r\n                console.log('7890')\r\n\r\n            }\r\n            if (this.node.parent.name == 'windows') {\r\n                this.node.parent.getComponent(Layout).alignHorizontal = true\r\n            }\r\n        }, this)\r\n        this.node.on(Node.EventType.TOUCH_CANCEL, (event: EventTouch) => {\r\n\r\n            if (this.node.parent.name == 'content') {\r\n                let parentBag = this.node.parent.getComponent(bag)\r\n                //检测拖拽到玩家身上且是食物就吃掉\r\n                if (this.playercontact == true && this.isFood == true) {\r\n                    parentBag.delete(this.node.name)\r\n                }\r\n                if (this.contact == true) {\r\n                    console.log('put it up')\r\n                    parentBag.delete(this.node.name, this.parentPath)\r\n                    console.log(this.node.parent.name)\r\n                }\r\n                parentBag.getComponent(bag).alignHorizontal()\r\n                console.log('7890')\r\n\r\n            }\r\n            if (this.node.parent.name == 'windows') {\r\n                this.node.parent.getComponent(Layout).alignHorizontal = true\r\n            }\r\n        }, this)\r\n        this.node.on(Node.EventType.TOUCH_MOVE, (event: EventTouch) => {\r\n            if (this.node.parent.name == 'content') {\r\n                this.isTouch = true\r\n                let e = find('Canvas/Camera').getComponent(Camera).screenToWorld(v3(event.getLocation().x, event.getLocation().y))\r\n                this.node.setWorldPosition(e)\r\n\r\n            }\r\n\r\n        }, this)\r\n\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\r\n        // 只在两个碰撞体开始接触时被调用一次\r\n        if (otherCollider.group == group.Player) {\r\n            this.contact = true\r\n            console.log(this.contact, 'contact')\r\n            this.parentPath = otherCollider.node.getPathInHierarchy()\r\n        }\r\n        console.log('onBeginContact')\r\n        if (otherCollider.node.parent.name == 'Player') {\r\n            this.playercontact = true\r\n        }\r\n    }\r\n    onEndContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\r\n        // 只在两个碰撞体结束接触时被调用一次\r\n        if (otherCollider.group == group.Player) {\r\n            this.contact = false\r\n            console.log(this.contact)\r\n        }\r\n        if (otherCollider.node.parent.name == 'Player') {\r\n            this.playercontact = false\r\n        }\r\n    }\r\n    interactionContactFunction(): void {\r\n        if (this.voidOnce == true) {\r\n            console.log('uuid', this.node.uuid)\r\n            dialogLocalData.setSysLocalAboutDIalog(this.node.uuid, action.add)\r\n        }\r\n        this.node.destroy()\r\n\r\n    }\r\n    onDestroy() {\r\n        super.onDestroy()\r\n        //物品被拾起的调用\r\n        if (this.node.parent.name != 'content' && this.node.parent.name != 'windows' && this.node.parent.parent.name != 'windows') {\r\n            let inventory = find('Canvas/Camera/bag')\r\n            let bagNode = find('Canvas/Camera/bag/view/content')\r\n            if (inventory) {\r\n                console.log(inventory.name)\r\n                if (inventory.active = true) {\r\n                    bagNode.getComponent(bag).add(this.node.name)\r\n                } else {\r\n                    inventory.active = true\r\n                    bagNode.getComponent(bag).add(this.node.name)\r\n                    inventory.active = false\r\n                }\r\n\r\n            }\r\n            console.log('addBag')\r\n\r\n        }\r\n        //物品是食物被吃掉的调用\r\n        if (this.node.parent.name == 'content') {\r\n            if (this.isFood == true) {\r\n                if (find('data')) {\r\n                    let data = find('data').getComponent(settingData)\r\n                    data.changeStateValue(StateType.饱食, this.增加的饱食度)\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}