{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/tools/chatBox/script/dialog_chat.ts"],"names":["_decorator","Component","Node","TextAsset","Label","Button","Prefab","Layout","instantiate","EventHandler","sys","Input","input","SpriteFrame","v3","dialogLocalData","chatNode","ccclass","property","action","dialog_galgame","displayName","tooltip","type","dialogindex","dialogRows","cell","index","button","jumptext","canPress","anima","canRestart","isChoose","start","schedule","onClickNext","getSysLocalAboutDialog","readText","csv","showDialogRow","onLoad","on","EventType","KEY_DOWN","onKeyDown","localStorage","removeItem","event","keyCode","parseInt","getItem","console","log","node","active","unscheduleAllCallbacks","onDestroy","off","update","deltaTime","setAni","动画重复检测","play","updateText","_name","_text","chatNodePrefab","chatNodeSelf","setParent","otherLayout","setPosition","chatNodeScript","getComponent","peopleName","string","peopleText","renwu_spriteFrame","head","spriteFrame","_TextAsset","text","split","eventHandler","emit","length","DialogueFunc","endFunc","GenerateOption","onOptionClick","id","getComponentsInChildren","destroyAllChildren","DialogueChooseFunc","cell5","Restart","_index","optionButton","cell3","dd","ooc","CLICK","getComponentInChildren"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, TextAsset, Label, Button, Prefab, Layout, resources, instantiate, EventHandler, sys, SkelAnimDataHub, Camera, find, UITransform, tween, animation, Animation, director, EventKeyboard, KeyCode, Input, input, Sprite, SpriteFrame, BaseRenderData } from 'cc';\r\nimport { dialogLocalData } from '../../本地存储/dialogLocal';\r\nimport { chatNode } from './chatNode';\r\nimport { v3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nexport enum action{\r\n    add,\r\n    delete,\r\n}\r\n@ccclass('dialog_galgame')\r\nexport class dialog_galgame extends Component{\r\n    @property(Prefab)\r\n    chatNode:Prefab=null!\r\n    @property(Prefab)\r\n    chatNodeSelf:Prefab=null!\r\n    @property([EventHandler])\r\n    eventHandler:EventHandler[]=[]\r\n    @property({displayName: \"人物立绘资源\", tooltip: \"图片数组代表在dialogindex的位置，比如0就在dialogindex等于0的时候显示图片\", type: SpriteFrame})\r\n    renwu_spriteFrame:SpriteFrame[]=[]\r\n    @property({displayName: \"csv对话文本文件\", tooltip: \"对话内容\", type: TextAsset})\r\n    csv:TextAsset=null!\r\n    @property(Prefab)\r\n    optionButton:Prefab=null!\r\n    @property(Layout)\r\n    Layout:Layout=null!\r\n    @property(Node)\r\n    otherLayout:Node=null!\r\n    //跳转对话的id\r\n    dialogindex:number=0\r\n    dialogRows:string[]\r\n    cell: string[];\r\n    index: number;\r\n    button: Node\r\n    jumptext: string=null;\r\n    canPress: boolean=true\r\n    anima: string;\r\n    canRestart: boolean;\r\n    isChoose: boolean=false\r\n    start() {\r\n        this.schedule(()=>{\r\n            if(this.isChoose==false&&this.canPress==true){\r\n                this.onClickNext()\r\n            }\r\n        },1)\r\n        \r\n        dialogLocalData.getSysLocalAboutDialog()\r\n        this.readText(this.csv)\r\n        this.showDialogRow()\r\n    }\r\n    onLoad(){\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this)\r\n        sys.localStorage.removeItem('JUMPTEXT')\r\n    }\r\n    onKeyDown (event: EventKeyboard) {\r\n        switch(event.keyCode) {\r\n            case parseInt(sys.localStorage.getItem('next')):\r\n                console.log('press')\r\n                if(this.isChoose==false){\r\n                if(this.canPress==true&&this.node.active==true){\r\n                    this.onClickNext()\r\n                    /*if(this.node.name=='序'){\r\n                        find('Canvas/Label').active=false\r\n                    }*/\r\n                }else if(this.canPress==false){\r\n                    this.unscheduleAllCallbacks()\r\n                    this.canPress=true\r\n                }\r\n                }\r\n\r\n                break;\r\n        }\r\n    }\r\n    protected onDestroy(): void {\r\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this)\r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n    setAni(anima:string,node:Animation,动画重复检测:boolean){\r\n        if(动画重复检测==true){\r\n            if(this.anima==anima){return}\r\n        }\r\n        this.anima=anima\r\n        node.play(anima)\r\n    }\r\n    updateText(_name:string,_text:string){\r\n        \r\n        if(_name=='郭志远'){\r\n            let chatNodePrefab=instantiate(this.chatNodeSelf)\r\n        chatNodePrefab.setParent(this.otherLayout) \r\n            chatNodePrefab.setPosition(v3(1100))\r\n            let chatNodeScript=chatNodePrefab.getComponent(chatNode)\r\n        chatNodeScript.peopleName.string=_name\r\n        chatNodeScript.peopleText.string=_text\r\n        if (this.renwu_spriteFrame[this.dialogindex] != null) {\r\n            chatNodeScript.head.spriteFrame = this.renwu_spriteFrame[this.dialogindex];\r\n        }\r\n        }else{\r\n            let chatNodePrefab=instantiate(this.chatNode)\r\n        chatNodePrefab.setParent(this.otherLayout) \r\n            chatNodePrefab.setPosition(v3(0))\r\n            let chatNodeScript=chatNodePrefab.getComponent(chatNode)\r\n        chatNodeScript.peopleName.string=_name\r\n        chatNodeScript.peopleText.string=_text\r\n        if (this.renwu_spriteFrame[this.dialogindex] != null) {\r\n            chatNodeScript.head.spriteFrame = this.renwu_spriteFrame[this.dialogindex];\r\n        }\r\n        }\r\n        \r\n        \r\n\r\n    }\r\n    readText(_TextAsset:TextAsset){\r\n        this.dialogRows=_TextAsset.text.split('\\n')\r\n    }\r\n    showDialogRow(){\r\n        if(this.eventHandler[this.dialogindex]){\r\n            this.eventHandler[this.dialogindex].emit([])\r\n        }\r\n        for (let index = 0; index < this.dialogRows.length; index++) {\r\n            this.cell=this.dialogRows[index].split(',')\r\n            if(this.cell[0]=='#'&&parseInt(this.cell[1])==this.dialogindex){\r\n\r\n                this.canPress=true\r\n                this.updateText(this.cell[2],this.cell[3])\r\n                this.dialogindex=parseInt(this.cell[4])\r\n                this.DialogueFunc(this.cell[5])\r\n                console.log(this.cell[4])\r\n                if(this.cell[4]==''){\r\n                    console.log('endFunc')\r\n                    \r\n                    this.endFunc()\r\n                }\r\n                break\r\n            }else if(this.cell[0]=='&'&&parseInt(this.cell[1])==this.dialogindex){\r\n                this.canPress=false\r\n                this.GenerateOption(index)\r\n               \r\n                break\r\n            }\r\n        }\r\n    }   \r\n    onOptionClick(id:number){\r\n        this.canPress=true\r\n        this.dialogindex=id\r\n        for (let index = 0; index < this.Layout.getComponentsInChildren(Button).length ; index++){\r\n            this.Layout.node.destroyAllChildren()\r\n        }\r\n    }\r\n    //对话选项绑定函数\r\n    DialogueChooseFunc(cell5){\r\n        let cell=parseInt(cell5)\r\n        console.log(cell)\r\n        //选择CSV文件中的《事件》id，所执行对应的代码\r\n        //事件必须出现在&对活里\r\n\r\n        \r\n    }\r\n    endFunc(){\r\n        this.canRestart=true\r\n    }\r\n    Restart(){\r\n        this.readText(this.csv)\r\n        this.dialogindex=0\r\n        this.cell=this.dialogRows[1].split(',')\r\n        if(this.canRestart==true){\r\n            this.showDialogRow()\r\n            this.canRestart=false\r\n        }\r\n       \r\n    }\r\n    DialogueFunc(cell5){\r\n        let cell=parseInt(cell5)\r\n        console.log(cell)\r\n        //选择CSV文件中的《事件》id，所执行对应的代码\r\n         //事件必须出现在#对活里\r\n        \r\n    }\r\n    \r\n    GenerateOption(_index: number) {\r\n        while (true) {\r\n            this.cell = this.dialogRows[_index].split(',');\r\n            if (this.cell[0] == '&') {\r\n                this.button = instantiate(this.optionButton);\r\n                this.button.setParent(this.Layout.node);\r\n                let cell3=this.cell[3]\r\n                let dd = this.cell[4];\r\n                let cell = this.cell[5];\r\n                this.isChoose=true\r\n                let ooc = () => {\r\n                    this.isChoose=false\r\n                    this.DialogueChooseFunc(cell);\r\n                    this.onOptionClick(parseInt(dd));\r\n                    this.updateText('郭志远',cell3)\r\n                    console.log('gzy')\r\n                };\r\n                \r\n                this.button.on(Button.EventType.CLICK, ooc, this);\r\n                this.button.getComponentInChildren(Label).string = this.cell[3];\r\n                _index++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    onClickNext(){\r\n        /*this.button_next.node.active=true\r\n        this.cell=this.dialogRows[parseInt(this.jumptext)].split(',')\r\n        this.dialogindex=parseInt(this.cell[4])*/\r\n        this.showDialogRow()\r\n    }\r\n}\r\n    \r\n\r\n\r\n\r\n"]}