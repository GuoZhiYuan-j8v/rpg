{"version":3,"sources":["file:///C:/Users/ffgdgrrr/Desktop/rpg/assets/tools/%E6%B5%B7%E9%BE%9F%E6%B1%A4/script/nawenhao.ts"],"names":["_decorator","Collider2D","Component","Contact2DType","input","Input","KeyCode","Node","tween","v2","v3","interaction","ccclass","property","nawenhao","eat","isMove","start","collider","node","children","getComponent","on","BEGIN_CONTACT","onBeginContact","END_CONTACT","onEndContact","onLoad","EventType","KEY_DOWN","onKeyDown","selfCollider","otherCollider","onDestroy","off","event","keyCode","KEY_A","console","log","moveBy","angle","KEY_D","KEY_W","KEY_S","KEY_Z","eatQuestion","sendTheQuestion","vector2","by","position","x","y","call","question","checkNode","worldPosition","Math","floor","questionNodeParent","i","to","delay","interactionContactFunction","length"],"mappings":"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","sourcesContent":["import { _decorator, Collider2D, Component, Contact2DType, EventKeyboard, input, Input, KeyCode, Node, tween, v2, v3, Vec2 } from 'cc';\r\nimport { questionNode } from './questionNode';\r\nimport { interaction } from '../../interaction/interaction';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('nawenhao')\r\nexport class nawenhao extends Component {\r\n    @property(Node)\r\n    checkNode:Node=null!;\r\n    @property(Node)\r\n    question:Node=null!;\r\n    eat: boolean=false\r\n    @property(Node)\r\n    questionNodeParent:Node=null;\r\n    protected start(): void {\r\n        let collider = this.node.children[0].getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n            collider.on(Contact2DType.END_CONTACT, this.onEndContact, this);\r\n            }\r\n    }\r\n    isMove: boolean=false\r\n    onLoad () {\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    }\r\n    onBeginContact (selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        \r\n\r\n    }\r\n    onEndContact (selfCollider: Collider2D, otherCollider: Collider2D) {\r\n        \r\n\r\n    }\r\n    onDestroy () {\r\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    }\r\n    onKeyDown (event: EventKeyboard) {\r\n        switch(event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                console.log('Press a key');\r\n                this.moveBy(v2(-128))\r\n                this.node.angle=90\r\n                break\r\n            case KeyCode.KEY_D:\r\n                this.moveBy(v2(128))\r\n                this.node.angle=-90\r\n                break\r\n            case KeyCode.KEY_W:\r\n                this.moveBy(v2(0,128))\r\n                this.node.angle=0\r\n                break\r\n            case KeyCode.KEY_S:\r\n                this.moveBy(v2(0,-128))\r\n                this.node.angle=-180\r\n                break\r\n            case KeyCode.KEY_Z:\r\n                if(this.eat==false){\r\n                    this.eatQuestion()\r\n                }else if(this.eat==true){\r\n                    this.sendTheQuestion()\r\n                }\r\n                \r\n                break\r\n        }\r\n    }\r\n    moveBy(vector2:Vec2){\r\n        if(this.isMove==false){\r\n        this.isMove=true\r\n        tween(this.node)\r\n        .by(0.3,{position:v3(vector2.x,vector2.y)})\r\n        .call(()=>{\r\n            this.isMove=false;\r\n        })\r\n        .start()\r\n        if(this.eat==true){\r\n            tween(this.question)\r\n            .by(0.3,{position:v3(vector2.x,vector2.y)})\r\n            .start()\r\n        }\r\n        \r\n    }\r\n    }\r\n    eatQuestion(){\r\n        console.log(this.checkNode.worldPosition,this.question.worldPosition)\r\n        if(this.checkNode.worldPosition.x==this.question.worldPosition.x&&Math.floor(this.checkNode.worldPosition.y)==Math.floor(this.question.worldPosition.y)){\r\n            this.question.position=this.node.position\r\n            this.eat=true\r\n        }\r\n    }\r\n    sendTheQuestion(){\r\n        for(let i=0;i<this.questionNodeParent.children.length;i++){\r\n            if(this.question.position.x==this.questionNodeParent.children[i].position.x){\r\n                if(this.node.angle==0&&this.question.position.y<this.questionNodeParent.children[i].position.y){\r\n                    tween(this.question)\r\n                    .to(0.5,{position:this.questionNodeParent.children[i].position})\r\n                    .delay(0.5)\r\n                    .call(()=>{\r\n                        this.questionNodeParent.children[i].getComponent(interaction).interactionContactFunction()\r\n                   \r\n                    })\r\n                    .start()\r\n                    this.eat=false\r\n                    break\r\n                }\r\n                if(this.node.angle==-180&&this.question.position.y>this.questionNodeParent.children[i].position.y){\r\n                    tween(this.question)\r\n                    .to(0.5,{position:this.questionNodeParent.children[i].position})\r\n                    .delay(0.5)\r\n                    .call(()=>{\r\n                        this.questionNodeParent.children[i].getComponent(interaction).interactionContactFunction()\r\n                    })\r\n                    .start()\r\n                    this.eat=false\r\n                    break\r\n                }\r\n            }\r\n            if(this.question.position.y==this.questionNodeParent.children[i].position.y){\r\n                if(this.node.angle==-90&&this.question.position.x<this.questionNodeParent.children[i].position.x){\r\n                    tween(this.question)\r\n                    .to(0.5,{position:this.questionNodeParent.children[i].position})\r\n                    .delay(0.5)\r\n                    .call(()=>{\r\n                        this.questionNodeParent.children[i].getComponent(interaction).interactionContactFunction()\r\n                   \r\n                    })\r\n                    .start()\r\n                    this.eat=false\r\n                    break\r\n                }\r\n                if(this.node.angle==90&&this.question.position.x>this.questionNodeParent.children[i].position.x){\r\n                    tween(this.question)\r\n                    .to(0.5,{position:this.questionNodeParent.children[i].position})\r\n                    .delay(0.5)\r\n                    .call(()=>{\r\n                        this.questionNodeParent.children[i].getComponent(interaction).interactionContactFunction()\r\n                    })\r\n                    .start()\r\n                    this.eat=false\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n}\r\n\r\n\r\n"]}